import{a as se,b as ae}from"./chunk-7357LMBM.js";import{Aa as oe,Ba as ie,D as te,Da as h,F as c,Fa as re,G as l,Ha as v,Ia as k,Ja as w,L as g,M as u,N as o,O as t,P as b,Q as S,R as m,S as _,T as i,U as f,a as Q,b as X,ca as E,d as y,da as T,ea as ne,na as I,oa as N,pa as C,q as Z,qa as z,ra as j,u as x,ua as D,v as ee,va as V,wa as R,x as O,y as P,ya as H}from"./chunk-BNCUL27B.js";var Y=y(k());var ce=(()=>{let r=class r{constructor(s,e,n){this.authService=s,this.router=e,this.userService=n,this.username=""}ngOnInit(){this.username=this.authService.getUser()}notesAdm(){this.router.navigate(["/admin/notesAdm"])}usersAdm(){this.router.navigate(["/admin/usersAdm"])}friendshipAdm(){this.router.navigate(["/admin/friendshipAdm"])}return(){this.router.navigate(["/admin"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}deleteAccount(){Y.default.fire({title:"Are you sure you want to delete this account?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(s=>{s.isConfirmed&&this.userService.deleteUser(this.username).subscribe(()=>{Y.default.fire({icon:"success",title:"Account deleted successfully",timer:2e3,showConfirmButton:!1}),this.authService.logout(),this.router.navigate(["/login"])},e=>{Y.default.fire({icon:"error",title:"Error",text:"Error deleting the account",timer:2e3,showConfirmButton:!1})})})}};r.\u0275fac=function(e){return new(e||r)(l(v),l(h),l(w))},r.\u0275cmp=x({type:r,selectors:[["app-admin-home"]],decls:28,vars:1,consts:[[1,"container"],[1,"welcome-banner"],["id","username"],[1,"content"],[1,"main-action-button"],[3,"click"],[1,"logout-banner"],[1,"return-button"],[1,"logout-button"],[1,"delete-account-button",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),i(3,"NoteSphere"),t()(),o(4,"div",3)(5,"div",4)(6,"button",5),m("click",function(){return n.notesAdm()}),i(7,"Notes"),t()(),o(8,"div",4)(9,"button",5),m("click",function(){return n.usersAdm()}),i(10,"Users"),t()(),o(11,"div",4)(12,"button",5),m("click",function(){return n.friendshipAdm()}),i(13,"Friendship"),t()()(),o(14,"div",6)(15,"div",7)(16,"button",5),m("click",function(){return n.return()}),i(17,"Return"),t()(),o(18,"span"),i(19,"Welcome again, "),o(20,"span",2),i(21),t(),i(22,"!"),t(),o(23,"div",8)(24,"button",5),m("click",function(){return n.logout()}),i(25,"Exit"),t(),o(26,"button",9),m("click",function(){return n.deleteAccount()}),i(27,"Delete Account"),t()()()()),e&2&&(c(21),f(n.username))},styles:[".container[_ngcontent-%COMP%]{margin:0;padding:0;font-family:DM Sans,sans-serif;background-color:#fdfeee;height:calc(100vh - 100px);overflow:hidden}.welcome-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:40px 20px;text-align:center;font-size:36px;font-family:Oswald,sans-serif;border-bottom:5px solid #FBB566;width:100%;box-shadow:0 4px 8px #0000001a;position:fixed;top:0;left:0}.content[_ngcontent-%COMP%]{padding-top:100px;padding-bottom:60px;display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:40px;margin-bottom:60px;position:absolute;inset:0}.main-action-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:50px 100px;border-radius:8px;margin:50px;font-size:35px;cursor:pointer;box-shadow:0 7px 14px #0000001a}.logout-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:20px;font-size:20px;font-family:Oswald,sans-serif;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -4px 8px #0000001a;position:fixed;bottom:0;left:0;right:0;width:100%;border-top:5px solid #FBB566}.return-button[_ngcontent-%COMP%]{margin:0 10px}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a;visibility:hidden}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.logout-button[_ngcontent-%COMP%]{margin:0 50px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a;margin-right:20px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.logout-button[_ngcontent-%COMP%]   .delete-account-button[_ngcontent-%COMP%]{background-color:tomato}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .main-action-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}"]});let a=r;return a})();var $=y(k());function ge(a,r){if(a&1){let p=S();o(0,"div")(1,"div",9)(2,"h2"),i(3),t(),b(4,"div",10),o(5,"button",11),m("click",function(){let e=O(p).$implicit,n=_();return P(e._id&&n.eliminarNota(e._id))}),i(6,"Eliminar"),t()()()}if(a&2){let p=r.$implicit;c(3),f(p.title),c(),u("innerHTML",p.content,te)}}var de=(()=>{let r=class r{constructor(s,e,n){this.authService=s,this.router=e,this.notesService=n,this.notas=[],this.username=""}ngOnInit(){this.obtenerNotas(),this.username=this.authService.getUser()}obtenerNotas(){this.notesService.getAllNotes().subscribe(s=>{this.notas=s},s=>{console.error("Error al obtener las notas:",s)})}eliminarNota(s){$.default.fire({title:"Are you sure you want to delete this note?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&this.notesService.deleteNote(s).subscribe(()=>{this.notas=this.notas.filter(n=>n._id!==s),$.default.fire({title:"Deleted!",text:"The note has been deleted.",icon:"success",showConfirmButton:!1,timer:2e3})},n=>{$.default.fire({title:"Error!",text:"There was an error deleting the note.",icon:"error",showConfirmButton:!1,timer:2e3})})})}return(){this.router.navigate(["/admin"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}};r.\u0275fac=function(e){return new(e||r)(l(v),l(h),l(se))},r.\u0275cmp=x({type:r,selectors:[["app-notas"]],decls:18,vars:2,consts:[[1,"container"],[1,"welcome-banner"],["id","username"],[1,"content"],[4,"ngFor","ngForOf"],[1,"logout-banner"],[1,"return-button"],[3,"click"],[1,"logout-button"],[1,"nota"],[3,"innerHTML"],[1,"btn","btn-danger",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),i(3,"Friendship List"),t()(),o(4,"div",3),g(5,ge,7,2,"div",4),t(),o(6,"div",5)(7,"div",6)(8,"button",7),m("click",function(){return n.return()}),i(9,"Return"),t()(),o(10,"span"),i(11,"Hi, "),o(12,"span",2),i(13),t(),i(14,"!"),t(),o(15,"div",8)(16,"button",7),m("click",function(){return n.logout()}),i(17,"Exit"),t()()()()),e&2&&(c(5),u("ngForOf",n.notas),c(8),f(n.username))},dependencies:[E],styles:[".container[_ngcontent-%COMP%]{margin:0;padding:0;font-family:DM Sans,sans-serif;background-color:#fdfeee;height:calc(100vh - 100px);overflow:hidden}.welcome-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:40px 20px;text-align:center;font-size:36px;font-family:Oswald,sans-serif;border-bottom:5px solid #FBB566;z-index:10;width:100%;box-shadow:0 4px 8px #0000001a;position:fixed;top:0;left:0}.content[_ngcontent-%COMP%]{padding-top:140px;padding-bottom:100px;display:flex;margin-top:0;position:absolute;inset:0 0 60px 15px;box-sizing:border-box;overflow-y:auto;align-items:flex-start;flex-wrap:wrap;justify-content:flex-start;gap:20px}.logout-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:20px;font-size:20px;font-family:Oswald,sans-serif;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -4px 8px #0000001a;position:fixed;bottom:0;left:0;right:0;width:100%;border-top:5px solid #FBB566}.return-button[_ngcontent-%COMP%]{margin:0 10px}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.logout-button[_ngcontent-%COMP%]{margin:0 50px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.nota[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;padding:20px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;min-width:276px;box-sizing:border-box}.nota[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;text-align:center}.nota[_ngcontent-%COMP%]   div[innerHTML][_ngcontent-%COMP%]{flex-grow:1;padding:10px 0}.nota[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;width:100%;padding:10px 0}.nota[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]{background-color:tomato;color:#fff;border:none;border-radius:5px}.nota[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}"]});let a=r;return a})();var U=y(k());function xe(a,r){if(a&1){let p=S();o(0,"tr")(1,"td"),i(2),t(),o(3,"td"),i(4),t(),o(5,"td"),i(6),t(),o(7,"td")(8,"button",11),m("click",function(){let e=O(p).$implicit,n=_();return P(n.deleteUser(e.username))}),i(9,"Delete"),t(),o(10,"button",4),m("click",function(){let e=O(p).$implicit,n=_();return P(n.navigateToEditUser(e.username))}),i(11,"Edit"),t()()()}if(a&2){let p=r.$implicit;c(2),f(p.username),c(2),f(p.password),c(2),f(p.admin)}}var le=(()=>{let r=class r{constructor(s,e,n){this.userService=s,this.authService=e,this.router=n,this.users=[],this.username=""}ngOnInit(){this.loadUsers(),this.username=this.authService.getUser()}loadUsers(){this.userService.getAllUsers().subscribe(s=>{this.users=s},s=>{console.error("Error al cargar usuarios:",s)})}deleteUser(s){if(s===this.username){U.default.fire({icon:"error",title:"Oops...",text:"You cannot delete yourself",timer:2e3,showConfirmButton:!1});return}U.default.fire({title:"Are you sure you want to delete this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(e=>{e.isConfirmed&&this.userService.deleteUser(s).subscribe(()=>{this.users=this.users.filter(n=>n.username!==s),U.default.fire({icon:"success",title:"User deleted successfully",timer:2e3,showConfirmButton:!1})},n=>{U.default.fire({icon:"error",title:"Error",text:"Error deleting the user",timer:2e3,showConfirmButton:!1})})})}navigateToCreateUser(){this.router.navigate(["admin/usersAdm/create"])}navigateToEditUser(s){this.router.navigate(["admin/usersAdm/edit",s])}logout(){this.authService.logout(),this.router.navigate(["/login"])}return(){this.router.navigate(["/admin"])}};r.\u0275fac=function(e){return new(e||r)(l(w),l(v),l(h))},r.\u0275cmp=x({type:r,selectors:[["app-user-list"]],decls:32,vars:2,consts:[[1,"container"],[1,"welcome-banner"],["id","username"],[1,"content"],[1,"btn","btn-primary",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],[1,"logout-banner"],[1,"return-button"],[3,"click"],[1,"logout-button"],[1,"btn","btn-danger",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),i(3,"User List"),t()(),o(4,"div",3)(5,"button",4),m("click",function(){return n.navigateToCreateUser()}),i(6,"New user"),t(),o(7,"table",5)(8,"thead")(9,"tr")(10,"th"),i(11,"USERNAME"),t(),o(12,"th"),i(13,"PASSWORD"),t(),o(14,"th"),i(15,"ADMIN"),t(),o(16,"th"),i(17,"ACTIONS"),t()()(),o(18,"tbody"),g(19,xe,12,3,"tr",6),t()()(),o(20,"div",7)(21,"div",8)(22,"button",9),m("click",function(){return n.return()}),i(23,"Return"),t()(),o(24,"span"),i(25,"Hi, "),o(26,"span",2),i(27),t(),i(28,"!"),t(),o(29,"div",10)(30,"button",9),m("click",function(){return n.logout()}),i(31,"Exit"),t()()()()),e&2&&(c(19),u("ngForOf",n.users),c(8),f(n.username))},dependencies:[E],styles:[".container[_ngcontent-%COMP%]{margin:0;padding:0;font-family:DM Sans,sans-serif;background-color:#fdfeee;height:calc(100vh - 100px);overflow:hidden}.welcome-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:40px 20px;text-align:center;font-size:36px;font-family:Oswald,sans-serif;border-bottom:5px solid #FBB566;z-index:10;width:100%;box-shadow:0 4px 8px #0000001a;position:fixed;top:0;left:0}.content[_ngcontent-%COMP%]{padding-top:100px;padding-bottom:100px;margin-top:40px;position:absolute;inset:0 0 60px;box-sizing:border-box;overflow-y:auto;display:flex;flex-direction:column;align-items:center}.logout-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:20px;font-size:20px;font-family:Oswald,sans-serif;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -4px 8px #0000001a;position:fixed;bottom:0;left:0;right:0;width:100%;border-top:5px solid #FBB566}.return-button[_ngcontent-%COMP%]{margin:0 10px}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.logout-button[_ngcontent-%COMP%]{margin:0 50px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{opacity:.9}.btn-primary[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;margin:20px;font-size:20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.btn-danger[_ngcontent-%COMP%]{background-color:tomato;color:#fff;padding:10px 20px;margin:10px;font-size:18px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.btn-danger[_ngcontent-%COMP%]:hover{opacity:.9}.table[_ngcontent-%COMP%]{width:80%;margin:20px auto;background-color:#fffbe6;border:2px solid black;border-collapse:collapse;box-shadow:0 4px 8px #00000026}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid black;padding:10px;text-align:center}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f8f8f3}"]});let a=r;return a})();var B=y(k());function be(a,r){if(a&1){let p=S();o(0,"div")(1,"p"),i(2),t(),o(3,"button",7),m("click",function(){let e=O(p).$implicit,n=_().$implicit,d=_();return P(d.deleteFriend(n.username,e.friend))}),i(4,"Delete"),t()()}if(a&2){let p=r.$implicit;c(2),f(p.friend)}}function he(a,r){if(a&1&&(o(0,"div",9)(1,"h2"),i(2),t(),g(3,be,5,1,"div",10),t()),a&2){let p=r.$implicit;c(2),f(p.username),c(),u("ngForOf",p.friends)}}var me=(()=>{let r=class r{constructor(s,e,n){this.authService=s,this.friendsService=e,this.router=n,this.users=[],this.username1=""}ngOnInit(){this.getAllFriends(),this.username1=this.authService.getUser()}getAllFriends(){this.friendsService.getAllFriends().subscribe(s=>{this.users=s.reduce((e,n)=>{let d=e.find(M=>M.username===n.username);return d?d.friends.push(n):e.push({username:n.username,friends:[n]}),e},[])})}deleteFriend(s,e){B.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&this.friendsService.deleteFriendByUsername(s,e).subscribe(()=>{this.friendsService.deleteFriendByUsername(e,s).subscribe(()=>{this.getAllFriends(),B.default.fire({title:"Deleted!",text:"Friendship has been deleted.",icon:"success",showConfirmButton:!1,timer:2e3})},d=>{B.default.fire({title:"Error!",text:"Error deleting friendship.",icon:"error",showConfirmButton:!1,timer:2e3})})},d=>{B.default.fire({title:"Error!",text:"Error deleting friendship.",icon:"error",showConfirmButton:!1,timer:2e3})})})}return(){this.router.navigate(["/admin"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}};r.\u0275fac=function(e){return new(e||r)(l(v),l(ae),l(h))},r.\u0275cmp=x({type:r,selectors:[["app-friendship-adm"]],decls:18,vars:2,consts:[[1,"container"],[1,"welcome-banner"],["id","username"],[1,"content"],["class","user-friends-container",4,"ngFor","ngForOf"],[1,"logout-banner"],[1,"return-button"],[3,"click"],[1,"logout-button"],[1,"user-friends-container"],[4,"ngFor","ngForOf"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),i(3,"Friendship List"),t()(),o(4,"div",3),g(5,he,4,2,"div",4),t(),o(6,"div",5)(7,"div",6)(8,"button",7),m("click",function(){return n.return()}),i(9,"Return"),t()(),o(10,"span"),i(11,"Hi, "),o(12,"span",2),i(13),t(),i(14,"!"),t(),o(15,"div",8)(16,"button",7),m("click",function(){return n.logout()}),i(17,"Exit"),t()()()()),e&2&&(c(5),u("ngForOf",n.users),c(8),f(n.username1))},dependencies:[E],styles:[".container[_ngcontent-%COMP%]{margin:0;padding:0;font-family:DM Sans,sans-serif;background-color:#fdfeee;height:calc(100vh - 100px);overflow:hidden}.welcome-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:40px 20px;text-align:center;font-size:36px;font-family:Oswald,sans-serif;border-bottom:5px solid #FBB566;z-index:10;width:100%;box-shadow:0 4px 8px #0000001a;position:fixed;top:0;left:0}.content[_ngcontent-%COMP%]{padding-top:140px;padding-bottom:100px;margin-top:0;gap:20px;position:absolute;inset:0 0 60px 15px;box-sizing:border-box;overflow-y:auto;display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start}.logout-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:20px;font-size:20px;font-family:Oswald,sans-serif;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -4px 8px #0000001a;position:fixed;bottom:0;left:0;right:0;width:100%;border-top:5px solid #FBB566}.return-button[_ngcontent-%COMP%]{margin:0 10px}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.logout-button[_ngcontent-%COMP%]{margin:0 50px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.user-friends-container[_ngcontent-%COMP%]{background-color:#f8f8f3;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 8px #0003;padding:20px;width:calc(33.333% - 20px);box-sizing:border-box;min-height:100px;margin:10px;max-width:276px}.user-friends-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;text-align:center}.user-friends-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user-friends-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;text-align:center}.user-friends-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:tomato;color:#fff;padding:10px 20px;border-radius:5px;cursor:pointer;align-self:center;margin-top:auto}.user-friends-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}"]});let a=r;return a})();var q=y(k());function Ce(a,r){a&1&&(o(0,"div",15),i(1," Username already exists. "),t())}function ve(a,r){a&1&&(o(0,"div",15),i(1," Passwords do not match. "),t())}var pe=(()=>{let r=class r{constructor(s,e,n){this.formBuilder=s,this.userService=e,this.router=n,this.passwordMismatchError=!1,this.usernameExistsError=!1,this.userForm=this.formBuilder.group({username:["",C.required],password:["",C.required],confirmPassword:["",C.required],admin:[!1]})}onSubmit(){if(this.userForm.invalid)return;let{username:s,password:e,confirmPassword:n,admin:d}=this.userForm.value;if(e!==n){this.passwordMismatchError=!0;return}this.userService.checkUsernameExists(s).subscribe(M=>{if(M)this.usernameExistsError=!0;else{let L={username:s,password:e,admin:d?"Y":"N"};this.userService.createUser(L).subscribe(()=>{q.default.fire({title:"User created successfully.",icon:"success",showConfirmButton:!1,timer:2e3}),this.router.navigate(["admin/usersAdm"])},fe=>{q.default.fire({title:"Error creating user.",text:fe.message,icon:"error",showConfirmButton:!1,timer:2e3})})}},M=>{q.default.fire({title:"Error checking username.",text:M.message,icon:"error",showConfirmButton:!1,timer:2e3})})}};r.\u0275fac=function(e){return new(e||r)(l(H),l(w),l(h))},r.\u0275cmp=x({type:r,selectors:[["app-user-create"]],decls:25,vars:4,consts:[[1,"container"],[1,"form-login"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],[1,"form-group","form-check"],["for","admin",1,"form-check-label"],["type","checkbox","id","admin","formControlName","admin",1,"form-check-input"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),i(3,"Create User"),t(),o(4,"form",2),m("ngSubmit",function(){return n.onSubmit()}),o(5,"div",3)(6,"label",4),i(7,"Username:"),t(),b(8,"input",5),g(9,Ce,2,0,"div",6),t(),o(10,"div",3)(11,"label",7),i(12,"Password:"),t(),b(13,"input",8),t(),o(14,"div",3)(15,"label",9),i(16,"Confirm Password:"),t(),b(17,"input",10),t(),o(18,"div",11)(19,"label",12),i(20,"Admin"),t(),b(21,"input",13),t(),o(22,"button",14),i(23,"Create"),t(),g(24,ve,2,0,"div",6),t()()()),e&2&&(c(4),u("formGroup",n.userForm),c(5),u("ngIf",n.usernameExistsError),c(13),u("disabled",n.userForm.invalid),c(2),u("ngIf",n.passwordMismatchError))},dependencies:[T,D,N,I,z,j,V,R],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#5e7f88;font-family:DM Sans,sans-serif;position:absolute;inset:0}.form-login[_ngcontent-%COMP%]{padding:40px;background-color:#fdfeee;border:1px solid #000;border-radius:10px;box-shadow:0 4px 8px #0000001a;width:400px;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   form-check[_ngcontent-%COMP%]{margin-bottom:20px}h2[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;color:#000;margin-bottom:20px;text-align:center}label[_ngcontent-%COMP%]{color:#000;display:block;margin-bottom:10px;font-size:16px}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], .form-check-input[_ngcontent-%COMP%]{width:100%;padding:15px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box;font-size:16px}button[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;color:#fff;cursor:pointer;font-size:16px;margin-top:20px;background-color:#fbb566;box-shadow:0 4px 8px #0000001a}button[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{opacity:.9}.error[_ngcontent-%COMP%]{color:red;margin-top:10px;font-size:14px}.form-group.form-check[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.form-check-label[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-top:10px;vertical-align:middle;font-size:16px}.form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;vertical-align:middle;cursor:pointer}"]});let a=r;return a})();var K=y(k());function we(a,r){a&1&&(o(0,"div",15),i(1," Username already exists. "),t())}function Me(a,r){a&1&&(o(0,"div",15),i(1," Passwords do not match. "),t())}var ue=(()=>{let r=class r{constructor(s,e,n,d){this.formBuilder=s,this.userService=e,this.router=n,this.route=d,this.passwordMismatchError=!1,this.usernameExistsError=!1,this.user={username:"",password:"",admin:""},this.userForm=this.formBuilder.group({username:["",C.required],password:["",C.required],confirmPassword:["",C.required],admin:[!1]})}ngOnInit(){let s=this.route.snapshot.paramMap.get("username");s&&this.userService.getUserByUsername(s).subscribe(e=>{this.user=e,this.userForm.patchValue(X(Q({},e),{confirmPassword:e.password,admin:e.admin==="Y"}))})}onSubmit(){if(this.userForm.invalid)return;let{username:s,password:e,confirmPassword:n,admin:d}=this.userForm.value;if(e!==n){this.passwordMismatchError=!0;return}let M={username:s,password:e,admin:d?"Y":"N"};this.userService.updateUser(this.user.username,M).subscribe(()=>{K.default.fire({title:"User updated successfully.",icon:"success",showConfirmButton:!1,timer:2e3}),this.router.navigate(["admin/usersAdm"])},L=>{K.default.fire({title:"Error updating user.",text:L.message,icon:"error",showConfirmButton:!1,timer:2e3})})}};r.\u0275fac=function(e){return new(e||r)(l(H),l(w),l(h),l(ie))},r.\u0275cmp=x({type:r,selectors:[["app-users-edit"]],decls:25,vars:4,consts:[[1,"container"],[1,"form-login"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],[1,"form-group","form-check"],["for","admin",1,"form-check-label"],["type","checkbox","id","admin","formControlName","admin",1,"form-check-input"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),i(3,"Edit User"),t(),o(4,"form",2),m("ngSubmit",function(){return n.onSubmit()}),o(5,"div",3)(6,"label",4),i(7,"Username:"),t(),b(8,"input",5),g(9,we,2,0,"div",6),t(),o(10,"div",3)(11,"label",7),i(12,"Password:"),t(),b(13,"input",8),t(),o(14,"div",3)(15,"label",9),i(16,"Confirm Password:"),t(),b(17,"input",10),t(),o(18,"div",11)(19,"label",12),i(20,"Admin"),t(),b(21,"input",13),t(),o(22,"button",14),i(23,"Update"),t(),g(24,Me,2,0,"div",6),t()()()),e&2&&(c(4),u("formGroup",n.userForm),c(5),u("ngIf",n.usernameExistsError),c(13),u("disabled",n.userForm.invalid),c(2),u("ngIf",n.passwordMismatchError))},dependencies:[T,D,N,I,z,j,V,R],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#5e7f88;font-family:DM Sans,sans-serif;position:absolute;inset:0}.form-login[_ngcontent-%COMP%]{padding:40px;background-color:#fdfeee;border:1px solid #000;border-radius:10px;box-shadow:0 4px 8px #0000001a;width:400px;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   form-check[_ngcontent-%COMP%]{margin-bottom:20px}h2[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;color:#000;margin-bottom:20px;text-align:center}label[_ngcontent-%COMP%]{color:#000;display:block;margin-bottom:10px;font-size:16px}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], .form-check-input[_ngcontent-%COMP%]{width:100%;padding:15px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box;font-size:16px}button[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;color:#fff;cursor:pointer;font-size:16px;margin-top:20px;background-color:#fbb566;box-shadow:0 4px 8px #0000001a}button[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{opacity:.9}.error[_ngcontent-%COMP%]{color:red;margin-top:10px;font-size:14px}.form-group.form-check[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.form-check-label[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-top:10px;vertical-align:middle;font-size:16px}.form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;vertical-align:middle;cursor:pointer}"]});let a=r;return a})();var Oe=[{path:"",component:ce},{path:"notesAdm",component:de},{path:"usersAdm",component:le},{path:"usersAdm/create",component:pe},{path:"friendshipAdm",component:me},{path:"usersAdm/edit/:username",component:ue}],Ge=(()=>{let r=class r{};r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=ee({type:r}),r.\u0275inj=Z({imports:[ne,oe,re.forChild(Oe)]});let a=r;return a})();export{Ge as AdminModule};
