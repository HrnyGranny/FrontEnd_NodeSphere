import{A as p,D as h,E as u,F as s,G as r,H as C,I as M,J as d,K as b,L as a,M as f,W as O,X as $,Y as D,_ as S,ea as B,fa as V,ga as U,ha as z,ia as H,la as R,m as y,ma as q,n as N,na as G,p as w,pa as L,q as g,r as T,ra as W,t as v,u as _,ua as P,va as Y,wa as F,y as j,z as c}from"./chunk-YPBYPRW2.js";var k=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl="http://localhost:3000/api/users"}getAllUsers(){return this.http.get(this.apiUrl)}createUser(e){return this.http.post(this.apiUrl,e)}updateUser(e,n){return this.http.patch(`${this.apiUrl}/${e}`,n)}deleteUser(e){return this.http.delete(`${this.apiUrl}/${e}`)}checkUsernameExists(e){return this.http.get(`${this.apiUrl}/exists/${e}`)}};t.\u0275fac=function(n){return new(n||t)(w(S))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Q=(()=>{let t=class t{constructor(e,n,o){this.authService=e,this.router=n,this.userService=o,this.username=""}ngOnInit(){this.username=this.authService.getUser()}notesAdm(){this.router.navigate(["/admin/notesAdm"])}usersAdm(){this.router.navigate(["/admin/usersAdm"])}friendshipAdm(){this.router.navigate(["/admin/friendshipAdm"])}return(){this.router.navigate(["/admin"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}deleteAccount(){confirm("Are you sure you want to delete this user?")&&this.userService.deleteUser(this.username).subscribe(()=>{console.log("User deleted successfully")},e=>{console.error(e)})}};t.\u0275fac=function(n){return new(n||t)(p(F),p(P),p(k))},t.\u0275cmp=g({type:t,selectors:[["app-admin-home"]],decls:26,vars:1,consts:[[1,"container"],[1,"welcome-banner"],["id","username"],[1,"content"],[1,"main-action-button"],[3,"click"],[1,"logout-banner"],[1,"return-button"],[1,"logout-button"]],template:function(n,o){n&1&&(s(0,"div",0)(1,"div",1)(2,"span",2),a(3,"NoteSphere"),r()(),s(4,"div",3)(5,"div",4)(6,"button",5),d("click",function(){return o.notesAdm()}),a(7,"Notes"),r()(),s(8,"div",4)(9,"button",5),d("click",function(){return o.usersAdm()}),a(10,"Users"),r()(),s(11,"div",4)(12,"button",5),d("click",function(){return o.friendshipAdm()}),a(13,"Friendship"),r()()(),s(14,"div",6)(15,"div",7)(16,"button",5),d("click",function(){return o.return()}),a(17,"Return"),r()(),s(18,"span"),a(19,"Welcome again, "),s(20,"span",2),a(21),r(),a(22,"!"),r(),s(23,"div",8)(24,"button",5),d("click",function(){return o.logout()}),a(25,"Exit"),r()()()()),n&2&&(c(21),f(o.username))},styles:[".container[_ngcontent-%COMP%]{margin:0;padding:0;font-family:DM Sans,sans-serif;background-color:#fdfeee;height:100vh;overflow-x:hidden;overflow-y:auto}.welcome-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:40px 20px;text-align:center;font-size:36px;font-family:Oswald,sans-serif;border-bottom:5px solid #FBB566;width:100%;box-shadow:0 4px 8px #0000001a;position:fixed;top:0;left:0}.content[_ngcontent-%COMP%]{padding-top:100px;padding-bottom:60px;display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:40px;margin-bottom:60px;position:absolute;inset:0}.main-action-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:50px 100px;border-radius:8px;margin:50px;font-size:35px;cursor:pointer;box-shadow:0 7px 14px #0000001a}.logout-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:20px;font-size:20px;font-family:Oswald,sans-serif;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -4px 8px #0000001a;position:fixed;bottom:0;left:0;right:0;width:100%;border-top:5px solid #FBB566}.return-button[_ngcontent-%COMP%]{margin:0 10px}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a;visibility:hidden}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.logout-button[_ngcontent-%COMP%]{margin:0 50px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .main-action-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}"]});let i=t;return i})();var X=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl="http://localhost:3000/api/notes"}getAllNotes(){return this.http.get(this.apiUrl)}getNotesByOwner(e){return this.http.get(`${this.apiUrl}/owner/${e}`)}createNote(e){return this.http.post(this.apiUrl,e)}updateNote(e,n){return this.http.patch(`${this.apiUrl}/${e}`,n)}deleteNote(e){return this.http.delete(`${this.apiUrl}/${e}`)}};t.\u0275fac=function(n){return new(n||t)(w(S))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function ce(i,t){if(i&1){let l=M();s(0,"div")(1,"div",1)(2,"h2"),a(3),r(),C(4,"div",2),s(5,"button",3),d("click",function(){let n=v(l).$implicit,o=b();return _(o.editarNota(n))}),a(6,"Editar"),r(),s(7,"button",4),d("click",function(){let n=v(l).$implicit,o=b();return _(n._id&&o.eliminarNota(n._id))}),a(8,"Eliminar"),r()()()}if(i&2){let l=t.$implicit;c(3),f(l.title),c(),u("innerHTML",l.content,j)}}var Z=(()=>{let t=class t{constructor(e){this.notesService=e,this.notas=[]}ngOnInit(){this.obtenerNotas()}obtenerNotas(){this.notesService.getAllNotes().subscribe(e=>{this.notas=e},e=>{console.error("Error al obtener las notas:",e)})}editarNota(e){console.log("Editar nota:",e)}eliminarNota(e){confirm("\xBFEst\xE1s seguro de que quieres eliminar esta nota?")&&this.notesService.deleteNote(e).subscribe(()=>{this.notas=this.notas.filter(n=>n._id!==e)},n=>{console.error("Error al eliminar la nota:",n)})}};t.\u0275fac=function(n){return new(n||t)(p(X))},t.\u0275cmp=g({type:t,selectors:[["app-notas"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"nota"],[3,"innerHTML"],[3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(n,o){n&1&&h(0,ce,9,2,"div",0),n&2&&u("ngForOf",o.notas)},dependencies:[O]});let i=t;return i})();function le(i,t){if(i&1){let l=M();s(0,"tr")(1,"td"),a(2),r(),s(3,"td"),a(4),r(),s(5,"td"),a(6),r(),s(7,"td")(8,"button",11),d("click",function(){let n=v(l).$implicit,o=b();return _(o.deleteUser(n.username))}),a(9,"Delete"),r()()()}if(i&2){let l=t.$implicit;c(2),f(l.username),c(2),f(l.password),c(2),f(l.admin)}}var ee=(()=>{let t=class t{constructor(e,n,o){this.userService=e,this.authService=n,this.router=o,this.users=[],this.username=""}ngOnInit(){this.loadUsers(),this.username=this.authService.getUser()}loadUsers(){this.userService.getAllUsers().subscribe(e=>{this.users=e},e=>{console.error("Error al cargar usuarios:",e)})}deleteUser(e){if(e===this.username){alert("You can not delete yourself");return}confirm("\xBFEst\xE1s seguro de que quieres eliminar este usuario?")&&this.userService.deleteUser(e).subscribe(()=>{this.users=this.users.filter(n=>n.username!==e)},n=>{console.error("Error al eliminar el usuario:",n)})}navigateToCreateUser(){this.router.navigate(["admin/usersAdm/create"])}logout(){this.authService.logout(),this.router.navigate(["/login"])}return(){this.router.navigate(["/admin"])}};t.\u0275fac=function(n){return new(n||t)(p(k),p(F),p(P))},t.\u0275cmp=g({type:t,selectors:[["app-user-list"]],decls:32,vars:2,consts:[[1,"container"],[1,"welcome-banner"],["id","username"],[1,"content"],[1,"btn","btn-primary",3,"click"],[1,"table"],[4,"ngFor","ngForOf"],[1,"logout-banner"],[1,"return-button"],[3,"click"],[1,"logout-button"],[1,"btn","btn-danger",3,"click"]],template:function(n,o){n&1&&(s(0,"div",0)(1,"div",1)(2,"span",2),a(3,"User List"),r()(),s(4,"div",3)(5,"button",4),d("click",function(){return o.navigateToCreateUser()}),a(6,"New user"),r(),s(7,"table",5)(8,"thead")(9,"tr")(10,"th"),a(11,"USERNAME"),r(),s(12,"th"),a(13,"PASSWORD"),r(),s(14,"th"),a(15,"ADMIN"),r(),s(16,"th"),a(17,"ACTIONS"),r()()(),s(18,"tbody"),h(19,le,10,3,"tr",6),r()()(),s(20,"div",7)(21,"div",8)(22,"button",9),d("click",function(){return o.return()}),a(23,"Return"),r()(),s(24,"span"),a(25,"Welcome again, "),s(26,"span",2),a(27),r(),a(28,"!"),r(),s(29,"div",10)(30,"button",9),d("click",function(){return o.logout()}),a(31,"Exit"),r()()()()),n&2&&(c(19),u("ngForOf",o.users),c(8),f(o.username))},dependencies:[O],styles:[".container[_ngcontent-%COMP%]{margin:0;padding:0;font-family:DM Sans,sans-serif;background-color:#fdfeee;height:100vh;overflow-x:hidden;overflow-y:auto}.welcome-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:40px 20px;text-align:center;font-size:36px;font-family:Oswald,sans-serif;border-bottom:5px solid #FBB566;width:100%;box-shadow:0 4px 8px #0000001a;position:fixed;top:0;left:0}.content[_ngcontent-%COMP%]{padding-top:100px;padding-bottom:60px;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:80px;margin-bottom:60px;position:absolute;inset:0}.logout-banner[_ngcontent-%COMP%]{background-color:#5e7f88;color:#fff;padding:20px;font-size:20px;font-family:Oswald,sans-serif;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -4px 8px #0000001a;position:fixed;bottom:0;left:0;right:0;width:100%;border-top:5px solid #FBB566}.return-button[_ngcontent-%COMP%]{margin:0 10px}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.return-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.logout-button[_ngcontent-%COMP%]{margin:0 50px}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.logout-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9}.btn-primary[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff;padding:10px 20px;margin:20px;font-size:20px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.btn-danger[_ngcontent-%COMP%]{background-color:tomato;color:#fff;padding:10px 20px;margin:10px;font-size:18px;border-radius:8px;cursor:pointer;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]{width:80%;margin:20px auto;background-color:#fffbe6;border:2px solid black;border-collapse:collapse;box-shadow:0 4px 8px #00000026}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid black;padding:10px;text-align:center}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fbb566;color:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f8f8f3}"]});let i=t;return i})();var te=(()=>{let t=class t{constructor(e){this.http=e,this.apiUrl="http://localhost:3000/api/friends"}getAllFriends(){return this.http.get(this.apiUrl)}getFriendsByUsername(e){return this.http.get(`${this.apiUrl}/username/${e}`)}createFriend(e){return this.http.post(this.apiUrl,e)}deleteFriendByUsername(e){return this.http.delete(`${this.apiUrl}/username/${e}`)}};t.\u0275fac=function(n){return new(n||t)(w(S))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function pe(i,t){if(i&1){let l=M();s(0,"div")(1,"p"),a(2),r(),s(3,"button",1),d("click",function(){let n=v(l).$implicit,o=b().$implicit,m=b();return _(m.deleteFriend(o.username,n._id||"default"))}),a(4,"Delete"),r()()}if(i&2){let l=t.$implicit;c(2),f(l.friend)}}function me(i,t){if(i&1&&(s(0,"div")(1,"h2"),a(2),r(),h(3,pe,5,1,"div",0),r()),i&2){let l=t.$implicit;c(2),f(l.username),c(),u("ngForOf",l.friends)}}var ne=(()=>{let t=class t{constructor(e){this.friendsService=e,this.users=[]}ngOnInit(){this.getAllFriends()}getAllFriends(){this.friendsService.getAllFriends().subscribe(e=>{this.users=e.reduce((n,o)=>{let m=n.find(E=>E.username===o.username);return m?m.friends.push(o):n.push({username:o.username,friends:[o]}),n},[])})}deleteFriend(e,n){n?this.friendsService.deleteFriendByUsername(e).subscribe(()=>{this.getAllFriends()}):console.error("friendId is undefined")}};t.\u0275fac=function(n){return new(n||t)(p(te))},t.\u0275cmp=g({type:t,selectors:[["app-friendship-adm"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(n,o){n&1&&h(0,me,4,2,"div",0),n&2&&u("ngForOf",o.users)},dependencies:[O]});let i=t;return i})();function ue(i,t){i&1&&(s(0,"div",15),a(1," Username already exists. "),r())}function fe(i,t){i&1&&(s(0,"div",15),a(1," Passwords do not match. "),r())}var ie=(()=>{let t=class t{constructor(e,n,o){this.formBuilder=e,this.userService=n,this.router=o,this.passwordMismatchError=!1,this.usernameExistsError=!1,this.userForm=this.formBuilder.group({username:["",U.required],password:["",U.required],confirmPassword:["",U.required],admin:[!1]})}onSubmit(){if(this.userForm.invalid)return;let{username:e,password:n,confirmPassword:o,admin:m}=this.userForm.value;if(n!==o){this.passwordMismatchError=!0;return}this.userService.checkUsernameExists(e).subscribe(E=>{if(E)this.usernameExistsError=!0;else{let re={username:e,password:n,admin:m?"Y":"N"};this.userService.createUser(re).subscribe(()=>{console.log("Usuario creado correctamente."),this.router.navigate(["admin/usersAdm"])},oe=>{console.error("Error al crear usuario:",oe)})}},E=>{console.error("Error al verificar el nombre de usuario:",E)})}};t.\u0275fac=function(n){return new(n||t)(p(L),p(k),p(P))},t.\u0275cmp=g({type:t,selectors:[["app-user-create"]],decls:25,vars:4,consts:[[1,"container"],[1,"form-login"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username",1,"form-control"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],[1,"form-group","form-check"],["for","admin",1,"form-check-label"],["type","checkbox","id","admin","formControlName","admin",1,"form-check-input"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error"]],template:function(n,o){n&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Create User"),r(),s(4,"form",2),d("ngSubmit",function(){return o.onSubmit()}),s(5,"div",3)(6,"label",4),a(7,"Username:"),r(),C(8,"input",5),h(9,ue,2,0,"div",6),r(),s(10,"div",3)(11,"label",7),a(12,"Password:"),r(),C(13,"input",8),r(),s(14,"div",3)(15,"label",9),a(16,"Confirm Password:"),r(),C(17,"input",10),r(),s(18,"div",11)(19,"label",12),a(20,"Admin"),r(),C(21,"input",13),r(),s(22,"button",14),a(23,"Create"),r(),h(24,fe,2,0,"div",6),r()()()),n&2&&(c(4),u("formGroup",o.userForm),c(5),u("ngIf",o.usernameExistsError),c(13),u("disabled",o.userForm.invalid),c(2),u("ngIf",o.passwordMismatchError))},dependencies:[$,R,V,B,z,H,q,G],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#5e7f88;font-family:DM Sans,sans-serif;position:absolute;inset:0}.form-login[_ngcontent-%COMP%]{padding:40px;background-color:#fdfeee;border:1px solid #000;border-radius:10px;box-shadow:0 4px 8px #0000001a;width:400px;display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   form-check[_ngcontent-%COMP%]{margin-bottom:20px}h2[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;color:#000;margin-bottom:20px;text-align:center}label[_ngcontent-%COMP%]{color:#000;display:block;margin-bottom:10px;font-size:16px}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], .form-check-input[_ngcontent-%COMP%]{width:100%;padding:15px;border:1px solid #ccc;border-radius:5px;box-sizing:border-box;font-size:16px}button[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{width:100%;padding:15px;border:none;border-radius:8px;color:#fff;cursor:pointer;font-size:16px;margin-top:20px;background-color:#fbb566;box-shadow:0 4px 8px #0000001a}button[_ngcontent-%COMP%]:hover, .btn-primary[_ngcontent-%COMP%]:hover{opacity:.9}.error[_ngcontent-%COMP%]{color:red;margin-top:10px;font-size:14px}.form-group.form-check[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.form-check-label[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;margin-top:10px;vertical-align:middle;font-size:16px}.form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;vertical-align:middle;cursor:pointer}"]});let i=t;return i})();var ge=[{path:"",component:Q},{path:"notesAdm",component:Z},{path:"usersAdm",component:ee},{path:"usersAdm/create",component:ie},{path:"friendshipAdm",component:ne}],Fe=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=T({type:t}),t.\u0275inj=N({imports:[D,W,Y.forChild(ge)]});let i=t;return i})();export{Fe as AdminModule};
